<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>URL Shortener</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <div class="card mx-auto" style="max-width:720px;">
      <div class="card-body">
        <h3 class="card-title">URL Shortener</h3>
        <form id="shorten-form">
          <div class="mb-3">
            <input class="form-control" id="url" placeholder="Enter a long URL (https://...)" required>
          </div>
          <div class="mb-3">
            <input class="form-control" id="custom" placeholder="Custom alias (optional)">
          </div>
          <button class="btn btn-primary" type="submit">Shorten</button>
        </form>

        <div id="result" class="mt-3"></div>
      </div>
    </div>
  </div>

<script>
document.getElementById('shorten-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  const url = document.getElementById('url').value;
  const custom = document.getElementById('custom').value || null;
  const body = { url, custom };
  const res = await fetch('/api/shorten', {
    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body)
  });
  const data = await res.json();
  const out = document.getElementById('result');
  if (!res.ok) {
    out.innerHTML = `<div class="alert alert-danger">${data.error || 'Failed'}</div>`;
    return;
  }
  out.innerHTML = `<div class="alert alert-success">Short URL: <a href="${data.short_url}" target="_blank">${data.short_url}</a></div>`;
});
</script>
</body>
</html>
